<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üêØ –¢–∏–≥—Ä—ë–Ω–æ–∫ –≤ –ª–µ—Å—É - –¢–ï–°–¢ (–ò–≥—Ä–∞ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é)</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg-primary: #f5f7fa;
            --bg-secondary: #ffffff;
            --text-primary: #333333;
            --text-secondary: #666666;
            --border-color: #e0e0e0;
            --primary-color: #2196f3;
            --success-color: #4caf50;
            --error-color: #f44336;
            --warning-color: #ff9800;
        }
        body.dark-mode {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --text-primary: #ffffff;
            --text-secondary: #cccccc;
            --border-color: #444444;
        }
        body {
            font-family: 'Segoe UI', 'Arial', sans-serif;
            background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
            min-height: 100vh;
            padding: 20px;
            color: var(--text-primary);
            transition: background 0.3s;
            font-size: 16px;
        }
        /* –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã —à—Ä–∏—Ñ—Ç–æ–≤ */
        h1 { font-size: 2.2em; }
        h2 { font-size: 1.8em; }
        h3 { font-size: 1.5em; }
        h4 { font-size: 1.2em; }
        p { font-size: 1.05em; }
        small { font-size: 0.9em; }
        .container { max-width: 1400px; margin: 0 auto; }
        header {
            text-align: center;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        h1 {
            color: var(--primary-color);
            text-shadow: 1px 1px 0 rgba(33, 150, 243, 0.2);
            font-weight: 600;
            flex: 1;
            min-width: 300px;
        }
        .header-controls { display: flex; gap: 10px; flex-wrap: wrap; }
        .theme-btn, .player-btn {
            padding: 10px 20px;
            background: var(--bg-secondary);
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            color: var(--primary-color);
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            transition: all 0.3s;
        }
        .theme-btn:hover, .player-btn:hover {
            transform: translateY(-2px);
            background: var(--primary-color);
            color: white;
        }
        .player-info {
            padding: 10px 20px;
            background: var(--bg-secondary);
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            font-weight: 600;
            font-size: 16px;
            color: var(--primary-color);
            min-width: 200px;
            text-align: center;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        .modal.active { display: flex; }
        .modal-content {
            background: var(--bg-secondary);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.5s;
        }
        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .modal h2 { font-size: 2.5em; margin-bottom: 20px; color: var(--primary-color); }
        .modal p { font-size: 1.1em; margin-bottom: 20px; color: var(--text-secondary); }
        .modal input {
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            margin-bottom: 20px;
            background: var(--bg-primary);
            color: var(--text-primary);
            transition: border-color 0.3s;
        }
        .modal input:focus { outline: none; border-color: var(--primary-color); }
        .modal-btn {
            padding: 15px 40px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
        }
        .modal-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(33, 150, 243, 0.3); }
        .button-row { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .tabs { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; margin-top: 20px; }
        .tab-btn {
            padding: 12px 24px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-primary);
        }
        .tab-btn.active {
            background: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
            transform: scale(1.05);
        }
        .tab-btn:hover:not(.active) { transform: translateY(-2px); background: var(--bg-primary); }
        .tab-content { display: none; animation: fadeIn 0.5s; }
        .tab-content.active { display: block; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .levels { display: flex; gap: 12px; margin-bottom: 25px; justify-content: center; flex-wrap: wrap; }
        .level-btn {
            padding: 14px 20px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-primary);
            cursor: pointer;
            min-width: 100px;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        .level-btn.completed { background: var(--success-color); border-color: var(--success-color); color: white; }
        .level-btn.active { background: var(--primary-color); border-color: var(--primary-color); transform: scale(1.1); color: white; }
        .level-btn:hover { transform: translateY(-4px); }
        .level-icon { font-size: 28px; margin-bottom: 5px; }
        .game-layout { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-bottom: 20px; }
        @media (max-width: 1200px) { .game-layout { grid-template-columns: 1fr; } }
        .game-board {
            background: var(--bg-secondary);
            padding: 25px;
            border-radius: 15px;
            border: 3px solid var(--primary-color);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        #game-grid {
            display: grid;
            grid-template-columns: repeat(8, 60px);
            grid-template-rows: repeat(8, 60px);
            gap: 4px;
            margin: 20px auto;
            background: var(--bg-primary);
            padding: 15px;
            border-radius: 12px;
            border: 2px solid var(--border-color);
        }
        .cell {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            transition: all 0.3s;
            box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.05);
            cursor: pointer;
            user-select: none;
            border: 2px solid var(--border-color);
        }
        .cell:hover { transform: scale(1.05); }
        .empty { background: var(--bg-primary); }
        .tiger { background: #ff9800; border-color: #f57c00; animation: bounce 0.8s infinite alternate; cursor: pointer; transition: all 0.2s; font-size: 48px !important; }
        .tiger:hover { transform: scale(1.1); }
        @keyframes tigerJump { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        @keyframes tigerDance {
            0%, 100% { transform: translateX(0) rotate(0deg); }
            25% { transform: translateX(-8px) rotate(-3deg); }
            50% { transform: translateX(8px) rotate(3deg); }
            75% { transform: translateX(-8px) rotate(-3deg); }
        }
        .tiger.jump { animation: tigerJump 0.6s ease-in-out !important; }
        .tiger.dance { animation: tigerDance 0.8s infinite !important; }
        .wall { background: #2e7d32; border-color: #1b5e20; }
        .tree { background: #388e3c; border-color: #2e7d32; }
        .meat { background: #ffb74d; border-color: #ffa726; animation: wiggle 1s infinite alternate; }
        .exit { background: #4caf50; border-color: #388e3c; animation: glow 2s infinite; }
        .key { background: #ffd54f; border-color: #ffca28; animation: sparkle 1.5s infinite alternate; }
        .door { background: #ba68c8; border-color: #ab47bc; }
        .locked-door { background: #ba68c8; border-color: #ab47bc; position: relative; }
        .locked-door::after { content: "üîí"; position: absolute; font-size: 16px; bottom: 2px; right: 2px; }
        .paw { background: #ffcc80; border-color: #ffb74d; }
        .code-panel {
            background: var(--bg-secondary);
            padding: 25px;
            border-radius: 15px;
            border: 3px solid var(--primary-color);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            height: fit-content;
        }
        .level-task {
            background: var(--bg-primary);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid var(--primary-color);
            font-size: 16px;
            line-height: 1.6;
        }
        .level-task h4 { color: var(--primary-color); margin-bottom: 8px; font-size: 1.3em; }
        .stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 20px; }
        .stat { background: var(--bg-primary); padding: 12px; border-radius: 10px; text-align: center; border: 2px solid var(--border-color); }
        .stat-value { font-size: 32px; font-weight: bold; color: var(--primary-color); }
        .stat div:last-child { font-size: 15px; color: var(--text-secondary); margin-top: 6px; }
        .controls { display: flex; gap: 12px; margin-bottom: 20px; flex-wrap: wrap; }
        .button {
            padding: 14px 24px;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            min-width: 120px;
            font-family: 'Segoe UI', sans-serif;
            color: white;
        }
        .button:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15); }
        .button:disabled { opacity: 0.6; cursor: not-allowed; transform: none !important; }
        .run-btn { background: var(--success-color); flex: 2; }
        .run-btn.running { background: var(--warning-color); animation: pulse 1s infinite; }
        .reset-btn { background: var(--error-color); }
        .undo-btn { background: #673ab7; }
        #code-input {
            width: 100%;
            height: 200px;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-family: 'Courier New', monospace;
            font-size: 15px;
            padding: 15px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            resize: none;
            margin-bottom: 15px;
            line-height: 1.6;
            transition: border-color 0.3s;
        }
        #code-input.error { border-color: var(--error-color); background: rgba(244, 67, 54, 0.1); }
        #code-input:focus { outline: none; border-color: var(--primary-color); }
        .arrow-controls { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 15px; justify-items: center; max-width: 200px; margin-left: auto; margin-right: auto; }
        .arrow-btn {
            padding: 14px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            min-width: 60px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .arrow-btn:hover { transform: scale(1.15); background: #1976d2; }
        .arrow-btn:active { transform: scale(0.95); }
        .number-buttons { display: grid; grid-template-columns: repeat(5, 1fr); gap: 6px; margin-bottom: 15px; }
        .num-btn {
            padding: 8px;
            background: var(--warning-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        .num-btn:hover { transform: translateY(-2px); background: #f57c00; }
        .commands { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; margin-bottom: 15px; }
        .cmd-btn {
            padding: 12px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        .cmd-btn:hover { transform: translateY(-2px); background: #1976d2; }
        .cmd-icon { font-size: 20px; }
        .code-history { margin-top: 20px; padding: 15px; background: var(--bg-primary); border-radius: 10px; border: 2px solid var(--border-color); max-height: 150px; overflow-y: auto; }
        .code-history h4 { color: var(--primary-color); margin-bottom: 10px; font-size: 1.1em; }
        .history-item { padding: 8px; background: var(--bg-secondary); border-radius: 6px; margin-bottom: 8px; font-size: 13px; border-left: 3px solid var(--primary-color); }
        .history-time { color: var(--text-secondary); font-size: 12px; }
        .hint { background: var(--bg-primary); padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 4px solid var(--primary-color); font-size: 14px; }
        .hint h4 { color: var(--primary-color); margin-bottom: 8px; font-size: 1.1em; }
        .hint p { margin: 6px 0; line-height: 1.5; }
        /* –ü–ï–°–û–ß–ù–ò–¶–ê */
        .sandbox-container {
            background: var(--bg-secondary);
            padding: 25px;
            border-radius: 15px;
            border: 3px solid #7e57c2;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        .sandbox-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 12px;
        }
        .sandbox-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .sandbox-btn {
            padding: 10px 20px;
            background: #7e57c2;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .sandbox-btn:hover {
            transform: translateY(-2px);
            background: #673ab7;
        }
        .sandbox-btn.green {
            background: var(--success-color);
        }
        .sandbox-btn.green:hover {
            background: #388e3c;
        }
        .sandbox-btn.orange {
            background: var(--warning-color);
        }
        .sandbox-btn.orange:hover {
            background: #f57c00;
        }
        .sandbox-btn.red {
            background: var(--error-color);
        }
        .sandbox-btn.red:hover {
            background: #d32f2f;
        }
        .size-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            align-items: center;
            flex-wrap: wrap;
        }
        .size-btn {
            padding: 8px 12px;
            background: var(--bg-primary);
            border: 2px solid var(--border-color);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
        }
        .size-btn.active {
            background: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
        }
        .size-btn:hover {
            background: var(--bg-secondary);
        }
        .object-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
            gap: 8px;
            margin-bottom: 20px;
        }
        .obj-btn {
            padding: 12px;
            background: var(--bg-primary);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
            font-size: 14px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            color: var(--text-primary);
        }
        .obj-btn:hover {
            transform: scale(1.05);
            background: var(--bg-secondary);
        }
        .obj-btn.active {
            border-color: #7e57c2;
            background: #ede7f6;
            transform: scale(1.05);
        }
        #sandbox-grid {
            display: grid;
            gap: 4px;
            margin: 20px auto;
            background: var(--bg-primary);
            padding: 15px;
            border-radius: 12px;
            border: 2px solid var(--border-color);
            touch-action: none;
            position: relative;
            justify-content: center;
        }
        .sandbox-cell {
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            user-select: none;
            touch-action: none;
            transition: all 0.2s;
            font-size: 24px;
        }
        .sandbox-cell:hover {
            transform: scale(1.05);
        }
        .message-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--bg-secondary);
            padding: 30px;
            border-radius: 15px;
            border: 3px solid var(--warning-color);
            z-index: 1001;
            min-width: 350px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }
        .message-modal.active { display: block; animation: slideIn 0.3s; }
        .message-title { font-size: 1.8em; color: var(--primary-color); margin-bottom: 15px; font-weight: 600; }
        .message-text { line-height: 1.6; color: var(--text-secondary); margin-bottom: 20px; }
        .ok-btn {
            padding: 12px 30px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        .ok-btn:hover { transform: translateY(-2px); background: #1976d2; }
        .admin-btn-floating {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #d32f2f;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            z-index: 999;
            transition: all 0.3s;
            font-weight: bold;
        }
        .admin-btn-floating:hover { background: #b71c1c; transform: scale(1.1); box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4); }
        .admin-btn-floating:active { transform: scale(0.95); }
        @keyframes bounce { from { transform: translateY(0); } to { transform: translateY(-5px); } }
        @keyframes wiggle { 0%, 100% { transform: rotate(-3deg); } 50% { transform: rotate(3deg); } }
        @keyframes glow { 0%, 100% { box-shadow: 0 0 10px #4caf50; } 50% { box-shadow: 0 0 20px #4caf50; } }
        @keyframes sparkle { 0% { transform: scale(1); opacity: 1; } 100% { transform: scale(1.1); opacity: 0.8; } }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        @media (max-width: 768px) {
            h1 { font-size: 1.8em; }
            header { flex-direction: column; }
            .game-layout { grid-template-columns: 1fr; }
            #game-grid { grid-template-columns: repeat(8, 50px); grid-template-rows: repeat(8, 50px); gap: 3px; }
            .cell { width: 50px; height: 50px; font-size: 24px; }
            .stats { grid-template-columns: repeat(2, 1fr); }
            .commands { grid-template-columns: repeat(2, 1fr); }
            .arrow-controls { grid-template-columns: repeat(3, 1fr); }
            .arrow-btn { min-width: 50px; min-height: 50px; font-size: 20px; }
        }
        /* –ê–î–ú–ò–ù-–ü–ê–ù–ï–õ–¨ */
        .admin-panel-content {
            background: var(--bg-secondary);
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            max-width: 900px;
            max-height: 80vh;
            overflow-y: auto;
            animation: slideIn 0.5s;
        }
        .admin-panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 2px solid var(--border-color);
        }
        .admin-panel-header h2 {
            font-size: 1.8em;
            color: var(--primary-color);
            margin: 0;
        }
        .close-btn {
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: var(--text-primary);
            transition: all 0.3s;
        }
        .close-btn:hover {
            transform: scale(1.2);
            color: var(--error-color);
        }
        .admin-tabs {
            display: flex;
            gap: 8px;
            padding: 12px 15px;
            border-bottom: 2px solid var(--border-color);
            flex-wrap: wrap;
            overflow-x: auto;
        }
        .admin-tab-btn {
            padding: 8px 15px;
            background: var(--bg-primary);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            cursor: pointer;
            font-weight: 600;
            font-size: 13px;
            white-space: nowrap;
            transition: all 0.3s;
            flex-shrink: 0;
        }
        .admin-tab-btn.active {
            background: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
        }
        .admin-tab-btn:hover {
            transform: translateY(-2px);
        }
        .admin-tab-content {
            display: none;
            padding: 20px;
        }
        .admin-tab-content.active {
            display: block;
        }
        .admin-tab-content h3 {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: var(--primary-color);
        }
        .admin-section {
            background: var(--bg-primary);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid var(--primary-color);
        }
        .admin-section h4 {
            font-size: 1.1em;
            margin-bottom: 10px;
            color: var(--text-primary);
        }
        .admin-section input[type="file"] {
            margin-bottom: 10px;
            padding: 10px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            width: 100%;
        }
        .admin-section button {
            padding: 10px 20px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            margin-right: 10px;
        }
        .admin-section button:hover {
            transform: translateY(-2px);
            background: #1976d2;
        }
        .admin-section label {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            font-size: 1.1em;
        }
        .admin-section input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        .admin-level-item, .admin-user-item {
            background: var(--bg-secondary);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid var(--success-color);
        }
        .admin-level-item strong, .admin-user-item strong {
            font-size: 1.1em;
            color: var(--primary-color);
        }
        .admin-level-item p, .admin-user-item p {
            font-size: 0.9em;
            color: var(--text-secondary);
            margin: 5px 0;
        }
        .admin-level-item button, .admin-user-item button {
            padding: 8px 15px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            margin-right: 5px;
            margin-top: 10px;
            transition: all 0.3s;
        }
        .admin-level-item button:hover, .admin-user-item button:hover {
            transform: translateY(-2px);
            background: #1976d2;
        }
        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ */
        #admin-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        #admin-modal.active {
            display: flex;
        }
        /* –°—Ç–∏–ª–∏ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π */
        .admin-notification-item {
            background: var(--bg-secondary);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #2196F3;
        }
        .admin-notification-item strong {
            color: #2196F3;
            font-size: 1.1em;
        }
        .admin-notification-item p {
            margin: 8px 0;
            color: var(--text-primary);
        }
        .admin-notification-item small {
            color: var(--text-secondary);
        }
        @keyframes slideInRight {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }
        /* –ò–ò –ß–ê–¢ */
        .ai-chat-btn {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #9c27b0;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            z-index: 998;
            transition: all 0.3s;
            font-weight: bold;
        }
        .ai-chat-btn:hover {
            background: #7b1fa2;
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
        }
        .ai-chat-btn:active {
            transform: scale(0.95);
        }
        .ai-chat-widget {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 350px;
            height: 500px;
            background: var(--bg-secondary);
            border-radius: 15px;
            border: 3px solid #9c27b0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            z-index: 997;
            display: none;
            flex-direction: column;
            animation: slideInRight 0.3s;
        }
        .ai-chat-widget.active {
            display: flex;
        }
        .ai-chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 2px solid #9c27b0;
            background: linear-gradient(135deg, #9c27b0, #7b1fa2);
            color: white;
            border-radius: 12px 12px 0 0;
        }
        .ai-chat-header h3 {
            margin: 0;
            font-size: 1.1em;
        }
        .ai-chat-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.5em;
            cursor: pointer;
            transition: all 0.3s;
        }
        .ai-chat-close:hover {
            transform: scale(1.2);
        }
        .ai-chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .ai-chat-message {
            padding: 12px;
            border-radius: 10px;
            max-width: 90%;
            word-wrap: break-word;
            line-height: 1.4;
            font-size: 14px;
        }
        .ai-chat-message.user {
            align-self: flex-end;
            background: #9c27b0;
            color: white;
            border-bottom-right-radius: 2px;
        }
        .ai-chat-message.assistant {
            align-self: flex-start;
            background: var(--bg-primary);
            color: var(--text-primary);
            border-bottom-left-radius: 2px;
            border: 1px solid var(--border-color);
        }
        .ai-chat-message.loading {
            align-self: flex-start;
            background: var(--bg-primary);
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
            font-style: italic;
        }
        .ai-chat-input-area {
            display: flex;
            gap: 8px;
            padding: 12px;
            border-top: 2px solid var(--border-color);
            background: var(--bg-primary);
            border-radius: 0 0 12px 12px;
        }
        #ai-chat-input {
            flex: 1;
            padding: 10px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 13px;
            transition: border-color 0.3s;
        }
        #ai-chat-input:focus {
            outline: none;
            border-color: #9c27b0;
        }
        .ai-chat-send {
            padding: 10px 15px;
            background: #9c27b0;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 14px;
        }
        .ai-chat-send:hover {
            background: #7b1fa2;
            transform: translateY(-2px);
        }
        .ai-chat-send:active {
            transform: translateY(0);
        }
        @media (max-width: 480px) {
            .ai-chat-widget {
                width: calc(100vw - 40px);
                height: 400px;
                bottom: 80px;
            }
        }
        /* TUTORIAL STYLES */
        .tutorial-cmd-btn {
            padding: 15px;
            background: var(--bg-primary);
            border: 2px solid var(--primary-color);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--text-primary);
            font-weight: 600;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }
        .tutorial-cmd-btn:hover {
            background: var(--primary-color);
            color: white;
        }
        .tutorial-cmd-btn:active {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }
        .tutorial-cmd-btn small {
            font-size: 0.8em;
            opacity: 0.8;
        }
        @keyframes tutorialMove {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .tutorial-tiger {
            animation: tutorialMove 0.6s ease-in-out;
        }
    </style>
</head>
<body>
<script>
    // Clear corrupted stats on page load
    try {
        const stats = JSON.parse(localStorage.getItem('gameStats') || '{}');
        let shouldClear = false;
        
        // Check for corrupted data
        if (stats.levelStats) {
            for (let i = 1; i <= 6; i++) {
                if (stats.levelStats[i]) {
                    if (stats.levelStats[i].time > 1000 || isNaN(stats.levelStats[i].time)) {
                        shouldClear = true;
                        break;
                    }
                }
            }
        }
        
        // Check for NaN in totals
        if (isNaN(stats.totalAttempts) || isNaN(stats.totalScore) || isNaN(stats.totalSteps)) {
            shouldClear = true;
        }
        
        if (shouldClear) {
            localStorage.clear();
        }
    } catch (e) {
        localStorage.clear();
    }
</script>
<div id="welcome-modal" class="modal active">
    <div class="modal-content">
        <h2>üêØ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
        <p>–ü–æ–º–æ–≥–∏ —Ç–∏–≥—Ä—ë–Ω–∫—É –Ω–∞–π—Ç–∏ –≤—ã—Ö–æ–¥ –∏–∑ –ª–µ—Å—É!</p>
        <p style="font-size: 0.9em; color: var(--text-secondary);">–í–≤–µ–¥–∏ —Å–≤–æ—ë –∏–º—è:</p>
        <input type="text" id="player-name" placeholder="–¢–≤–æ—ë –∏–º—è" maxlength="30">
        <button class="modal-btn" onclick="startGame()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É! üéÆ</button>
    </div>
</div>
<div id="tiger-name-modal" class="modal">
    <div class="modal-content">
        <h2>üêØ –ö–∞–∫ –∑–æ–≤—É—Ç —Ç–∏–≥—Ä—ë–Ω–∫–∞?</h2>
        <p>–í—ã–±–µ—Ä–∏ –∏–º—è –¥–ª—è –Ω–∞—à–µ–≥–æ –º–∞–ª–µ–Ω—å–∫–æ–≥–æ –≥–µ—Ä–æ—è!</p>
        <p style="font-size: 0.9em; color: var(--text-secondary);">–í–≤–µ–¥–∏ –∏–º—è —Ç–∏–≥—Ä—ë–Ω–∫–∞:</p>
        <input type="text" id="tiger-name" placeholder="–ò–º—è —Ç–∏–≥—Ä—ë–Ω–∫–∞" maxlength="30">
        <button class="modal-btn" onclick="confirmTigerName()">–ì–æ—Ç–æ–≤–æ! üéÆ</button>
    </div>
</div>
<div id="story-selection-modal" class="modal" style="z-index: 4999;">
    <div class="modal-content" style="max-width: 800px; max-height: 80vh; overflow-y: auto;">
        <h2 style="text-align: center; margin-bottom: 30px;">üìñ –í—ã–±–µ—Ä–∏ –∏—Å—Ç–æ—Ä–∏—é</h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
            <button id="story-btn-intro" class="story-selection-btn" onclick="showStorySelectionDetail('intro')" style="padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 12px; cursor: pointer; font-size: 1.1em; font-weight: 600; transition: all 0.3s;">
                <div style="font-size: 2em; margin-bottom: 10px;">üêØ</div>
                <div>–í–≤–æ–¥–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è</div>
                <small style="opacity: 0.8;">–í—Å—Ç—Ä–µ—á–∞ —Å —Ç–∏–≥—Ä—ë–Ω–∫–æ–º</small>
            </button>
            <button id="story-btn-tutorial" class="story-selection-btn" onclick="showStorySelectionDetail('tutorial')" style="padding: 20px; background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%); color: white; border: none; border-radius: 12px; cursor: pointer; font-size: 1.1em; font-weight: 600; transition: all 0.3s;">
                <div style="font-size: 2em; margin-bottom: 10px;">üìö</div>
                <div>–ö–∞–∫ –∏–≥—Ä–∞—Ç—å?</div>
                <small style="opacity: 0.8;">–û–±—É—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–∞–º</small>
            </button>
            <button id="story-btn-level1" class="story-selection-btn" onclick="showStorySelectionDetail('level1')" style="padding: 20px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; border: none; border-radius: 12px; cursor: pointer; font-size: 1.1em; font-weight: 600; transition: all 0.3s;">
                <div style="font-size: 2em; margin-bottom: 10px;">üå±</div>
                <div>–£—Ä–æ–≤–µ–Ω—å 1</div>
                <small style="opacity: 0.8;">–ü–µ—Ä–≤—ã–µ —à–∞–≥–∏</small>
            </button>
            <button id="story-btn-level2" class="story-selection-btn" onclick="showStorySelectionDetail('level2')" style="padding: 20px; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; border: none; border-radius: 12px; cursor: pointer; font-size: 1.1em; font-weight: 600; transition: all 0.3s;">
                <div style="font-size: 2em; margin-bottom: 10px;">üçÉ</div>
                <div>–£—Ä–æ–≤–µ–Ω—å 2</div>
                <small style="opacity: 0.8;">–û–±—Ö–æ–¥ –¥–µ—Ä–µ–≤–∞</small>
            </button>
            <button id="story-btn-level3" class="story-selection-btn" onclick="showStorySelectionDetail('level3')" style="padding: 20px; background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: white; border: none; border-radius: 12px; cursor: pointer; font-size: 1.1em; font-weight: 600; transition: all 0.3s;">
                <div style="font-size: 2em; margin-bottom: 10px;">üåø</div>
                <div>–£—Ä–æ–≤–µ–Ω—å 3</div>
                <small style="opacity: 0.8;">–õ–µ—Å–Ω–∞—è —Ç—Ä–æ–ø–∞</small>
            </button>
            <button id="story-btn-level4" class="story-selection-btn" onclick="showStorySelectionDetail('level4')" style="padding: 20px; background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); color: white; border: none; border-radius: 12px; cursor: pointer; font-size: 1.1em; font-weight: 600; transition: all 0.3s;">
                <div style="font-size: 2em; margin-bottom: 10px;">üå≥</div>
                <div>–£—Ä–æ–≤–µ–Ω—å 4</div>
                <small style="opacity: 0.8;">–í–∫—É—Å–Ω–æ–µ –º—è—Å–æ</small>
            </button>
            <button id="story-btn-level5" class="story-selection-btn" onclick="showStorySelectionDetail('level5')" style="padding: 20px; background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); color: white; border: none; border-radius: 12px; cursor: pointer; font-size: 1.1em; font-weight: 600; transition: all 0.3s;">
                <div style="font-size: 2em; margin-bottom: 10px;">üîë</div>
                <div>–£—Ä–æ–≤–µ–Ω—å 5</div>
                <small style="opacity: 0.8;">–í–æ–ª—à–µ–±–Ω—ã–π –∫–ª—é—á</small>
            </button>
            <button id="story-btn-level6" class="story-selection-btn" onclick="showStorySelectionDetail('level6')" style="padding: 20px; background: linear-gradient(135deg, #ff9a56 0%, #ff6a88 100%); color: white; border: none; border-radius: 12px; cursor: pointer; font-size: 1.1em; font-weight: 600; transition: all 0.3s;">
                <div style="font-size: 2em; margin-bottom: 10px;">üèÜ</div>
                <div>–£—Ä–æ–≤–µ–Ω—å 6</div>
                <small style="opacity: 0.8;">–ë–æ–ª—å—à–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ</small>
            </button>
            <button id="story-btn-ending" class="story-selection-btn" onclick="showStorySelectionDetail('ending')" style="padding: 20px; background: linear-gradient(135deg, #ffd89b 0%, #19547b 100%); color: white; border: none; border-radius: 12px; cursor: pointer; font-size: 1.1em; font-weight: 600; transition: all 0.3s;">
                <div style="font-size: 2em; margin-bottom: 10px;">üéâ</div>
                <div>–ö–æ–Ω—Ü–æ–≤–∫–∞</div>
                <small style="opacity: 0.8;">–í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –¥–æ–º–æ–π</small>
            </button>
        </div>
        <div style="text-align: center; margin-top: 20px;">
            <button class="modal-btn" onclick="closeStorySelection()" style="background: var(--primary-color); color: white; border: none; padding: 12px 30px; border-radius: 10px; font-size: 1em; font-weight: 600; cursor: pointer;">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>
</div>
<div id="tutorial-modal" class="modal" style="background: rgba(0, 0, 0, 0.95); z-index: 5001;">
    <div class="modal-content" style="max-width: 90vw; max-height: 90vh; width: 90vw; height: 90vh; display: flex; flex-direction: column; padding: 30px; background: var(--bg-secondary); border: 3px solid var(--primary-color);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2 style="margin: 0; color: var(--primary-color); font-size: 2em;">üìö –ö–∞–∫ –∏–≥—Ä–∞—Ç—å?</h2>
            <button onclick="closeTutorial()" style="background: var(--success-color); color: white; border: none; padding: 12px 24px; border-radius: 10px; font-size: 1em; font-weight: 600; cursor: pointer; transition: all 0.3s;">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É! üéÆ</button>
        </div>
        
        <p style="font-size: 1.1em; margin-bottom: 20px; color: var(--text-primary);">–ù–∞–∂–º–∏ –Ω–∞ –∫–æ–º–∞–Ω–¥—É, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫ –æ–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç:</p>
        
        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 20px;">
            <button class="tutorial-cmd-btn" onclick="showTutorialDemo('right')">
                <span style="font-size: 28px;">‚Üí</span>
                <strong>–≤–ø—Ä–∞–≤–æ()</strong>
                <small>–î–≤–∏–∂–µ–Ω–∏–µ –≤–ø—Ä–∞–≤–æ</small>
            </button>
            <button class="tutorial-cmd-btn" onclick="showTutorialDemo('left')">
                <span style="font-size: 28px;">‚Üê</span>
                <strong>–≤–ª–µ–≤–æ()</strong>
                <small>–î–≤–∏–∂–µ–Ω–∏–µ –≤–ª–µ–≤–æ</small>
            </button>
            <button class="tutorial-cmd-btn" onclick="showTutorialDemo('up')">
                <span style="font-size: 28px;">‚Üë</span>
                <strong>–≤–≤–µ—Ä—Ö()</strong>
                <small>–î–≤–∏–∂–µ–Ω–∏–µ –≤–≤–µ—Ä—Ö</small>
            </button>
            <button class="tutorial-cmd-btn" onclick="showTutorialDemo('down')">
                <span style="font-size: 28px;">‚Üì</span>
                <strong>–≤–Ω–∏–∑()</strong>
                <small>–î–≤–∏–∂–µ–Ω–∏–µ –≤–Ω–∏–∑</small>
            </button>
            <button class="tutorial-cmd-btn" onclick="showTutorialDemo('eat')">
                <span style="font-size: 28px;">üçñ</span>
                <strong>–µ—Å—Ç—å()</strong>
                <small>–°—ä–µ—Å—Ç—å –º—è—Å–æ</small>
            </button>
            <button class="tutorial-cmd-btn" onclick="showTutorialDemo('take')">
                <span style="font-size: 28px;">üîë</span>
                <strong>–≤–∑—è—Ç—å()</strong>
                <small>–í–∑—è—Ç—å –∫–ª—é—á</small>
            </button>
            <button class="tutorial-cmd-btn" onclick="showTutorialDemo('open')">
                <span style="font-size: 28px;">üö™</span>
                <strong>–æ—Ç–∫—Ä—ã—Ç—å()</strong>
                <small>–û—Ç–∫—Ä—ã—Ç—å –¥–≤–µ—Ä—å</small>
            </button>
            <button class="tutorial-cmd-btn" onclick="showTutorialDemo('number')">
                <span style="font-size: 28px; background: #ff9800; color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">3</span>
                <strong>–≤–ø—Ä–∞–≤–æ(3)</strong>
                <small>–ü–æ–≤—Ç–æ—Ä–∏—Ç—å 3 —Ä–∞–∑–∞</small>
            </button>
        </div>
        
        <div id="tutorial-demo" style="display: none; background: var(--bg-primary); padding: 20px; border-radius: 10px; flex: 1; text-align: center; overflow-y: auto; margin-bottom: 20px;">
            <div id="tutorial-grid" style="display: grid; grid-template-columns: repeat(8, 50px); grid-template-rows: repeat(8, 50px); gap: 3px; margin: 0 auto 15px; background: var(--bg-secondary); padding: 15px; border-radius: 8px; width: fit-content;"></div>
            <p id="tutorial-text" style="color: var(--text-primary); font-weight: 600; font-size: 1.2em; margin: 0 0 15px 0;"></p>
            <div id="tutorial-info" style="color: var(--text-secondary); font-size: 0.95em; line-height: 1.6; margin-top: 15px; padding: 15px; background: rgba(0,0,0,0.1); border-radius: 8px;"></div>
        </div>
    </div>
</div>
<div id="message-modal" class="message-modal">
    <div class="message-title" id="msg-title">–£–†–ê! üéâ</div>
    <div class="message-text" id="msg-text"></div>
    <button class="ok-btn" onclick="closeMessage()">–ü–æ–Ω—è—Ç–Ω–æ!</button>
</div>

<!-- Statistics Modal -->
<div id="stats-modal" class="modal" style="z-index: 5500;">
    <div class="modal-content" style="max-width: 700px; max-height: 80vh; overflow-y: auto; background: var(--bg-secondary);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2 style="color: var(--primary-color); margin: 0;">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
            <button class="close-btn" onclick="closeStats()">‚úï</button>
        </div>
        <div id="stats-content"></div>
    </div>
</div>

<!-- Rating Modal for Sandbox Levels -->
<div id="rating-modal" class="modal" style="z-index: 3000;">
    <div class="modal-content" style="max-width: 500px; background: var(--bg-secondary);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2 style="color: var(--primary-color); margin: 0;">‚≠ê –û—Ü–µ–Ω–∏ —É—Ä–æ–≤–µ–Ω—å</h2>
            <button class="close-btn" onclick="document.getElementById('rating-modal').classList.remove('active')">‚úï</button>
        </div>
        <div style="text-align: center; padding: 20px;">
            <p id="rating-level-name" style="font-size: 1.2em; font-weight: 600; margin-bottom: 20px;"></p>
            <div style="display: flex; justify-content: center; gap: 10px; margin-bottom: 20px;">
                <button onclick="setRating(1)" style="font-size: 2em; background: none; border: none; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='scale(1.2)'" onmouseout="this.style.transform='scale(1)'">‚òÜ</button>
                <button onclick="setRating(2)" style="font-size: 2em; background: none; border: none; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='scale(1.2)'" onmouseout="this.style.transform='scale(1)'">‚òÜ</button>
                <button onclick="setRating(3)" style="font-size: 2em; background: none; border: none; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='scale(1.2)'" onmouseout="this.style.transform='scale(1)'">‚òÜ</button>
                <button onclick="setRating(4)" style="font-size: 2em; background: none; border: none; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='scale(1.2)'" onmouseout="this.style.transform='scale(1)'">‚òÜ</button>
                <button onclick="setRating(5)" style="font-size: 2em; background: none; border: none; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='scale(1.2)'" onmouseout="this.style.transform='scale(1)'">‚òÜ</button>
            </div>
            <button onclick="document.getElementById('rating-modal').classList.remove('active')" style="padding: 12px 30px; background: var(--primary-color); color: white; border: none; border-radius: 10px; font-size: 1em; font-weight: 600; cursor: pointer;">–ì–æ—Ç–æ–≤–æ</button>
        </div>
    </div>
</div>

<!-- Settings Modal -->
<div id="settings-modal" class="modal" style="z-index: 3000;">
    <div class="modal-content" style="max-width: 500px; background: var(--bg-secondary);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2 style="color: var(--primary-color); margin: 0;">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
            <button class="close-btn" onclick="document.getElementById('settings-modal').classList.remove('active')">‚úï</button>
        </div>
        <div style="padding: 20px;">
            <div style="background: var(--bg-primary); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; font-size: 1.1em;">
                    <input type="checkbox" id="theme-toggle" onchange="toggleTheme()" style="width: 20px; height: 20px; cursor: pointer;">
                    ‚òÄÔ∏è –°–≤–µ—Ç / üåô –¢–µ–º–Ω–æ
                </label>
            </div>
            
            <div style="background: var(--bg-primary); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; font-size: 1.1em;">
                    <input type="checkbox" id="sound-toggle" checked onchange="toggleSound()" style="width: 20px; height: 20px; cursor: pointer;">
                    <span id="sound-label">üîä –ó–≤—É–∫ –≤–∫–ª—é—á–µ–Ω</span>
                </label>
            </div>
            
            <div style="background: var(--bg-primary); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                <label style="display: block; font-size: 1.1em; margin-bottom: 10px;">üéÆ –†–µ–∂–∏–º –∏–≥—Ä—ã:</label>
                <div style="display: flex; gap: 10px;">
                    <button onclick="setGameMode('tutorial')" style="flex: 1; padding: 10px; background: var(--bg-secondary); border: 2px solid var(--primary-color); border-radius: 8px; color: var(--text-primary); font-weight: 600; cursor: pointer; transition: all 0.3s;" id="mode-tutorial">üìö –û–±—É—á–∞—é—â–∏–π</button>
                    <button onclick="setGameMode('advanced')" style="flex: 1; padding: 10px; background: var(--bg-secondary); border: 2px solid var(--primary-color); border-radius: 8px; color: var(--text-primary); font-weight: 600; cursor: pointer; transition: all 0.3s;" id="mode-advanced">üéØ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</button>
                </div>
                <div style="font-size: 0.9em; color: var(--text-secondary); margin-top: 10px;">
                    <div id="mode-description">üìö –û–±—É—á–∞—é—â–∏–π: –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏</div>
                </div>
            </div>
            
            <div style="background: var(--bg-primary); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                <label style="display: block; font-size: 1.1em; margin-bottom: 10px;">üê¢ –°–∫–æ—Ä–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è —Ç–∏–≥—Ä–∞:</label>
                <select id="speed-select" onchange="changeSpeed(this.value)" style="width: 100%; padding: 10px; border: 2px solid var(--primary-color); border-radius: 8px; background: var(--bg-secondary); color: var(--text-primary); font-size: 1em;">
                    <option value="100">‚ö° –ë—ã—Å—Ç—Ä–æ</option>
                    <option value="300" selected>üê¢ –ù–æ—Ä–º–∞–ª—å–Ω–æ</option>
                    <option value="600">üêå –ú–µ–¥–ª–µ–Ω–Ω–æ</option>
                </select>
            </div>
            
            <button onclick="document.getElementById('settings-modal').classList.remove('active')" style="width: 100%; padding: 12px; background: var(--primary-color); color: white; border: none; border-radius: 10px; font-size: 1em; font-weight: 600; cursor: pointer;">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>
</div>

<div class="container">
    <header>
        <h1>–¢–∏–≥—Ä—ë–Ω–æ–∫ –≤ –ª–µ—Å—É [–¢–ï–°–¢]</h1>
        <div style="display: flex; align-items: center; gap: 15px; position: absolute; top: 20px; right: 20px;">
            <div class="player-info" id="player-info" style="font-size: 1.1em; padding: 12px 25px;">–ò–≥—Ä–æ–∫: –ì–æ—Å—Ç—å</div>
            <button class="theme-btn" onclick="changePlayer()" title="–°–º–µ–Ω–∏—Ç—å –∏–≥—Ä–æ–∫–∞" style="padding: 12px 25px; font-size: 1em;">üë§ –°–º–µ–Ω–∏—Ç—å</button>
            <button class="theme-btn" onclick="document.getElementById('settings-modal').classList.add('active')" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏" style="padding: 12px 25px; font-size: 1em;">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        </div>
    </header>
    
    <div class="button-row">
        <button class="theme-btn" onclick="showStorySelection()" title="–°–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏–∏">üìñ –ò—Å—Ç–æ—Ä–∏–∏</button>
        <button class="theme-btn" onclick="document.getElementById('tutorial-modal').classList.add('active')" title="–ö–∞–∫ –∏–≥—Ä–∞—Ç—å">üìö –ö–∞–∫ –∏–≥—Ä–∞—Ç—å?</button>
        <button class="theme-btn" onclick="showStats()" title="–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
        <button class="theme-btn" onclick="showSandboxRating()" title="–†–µ–π—Ç–∏–Ω–≥ –ø–µ—Å–æ—á–Ω–∏—Ü—ã">üèóÔ∏è –†–µ–π—Ç–∏–Ω–≥</button>
        <button class="theme-btn" onclick="showPublishedLevels()" title="–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω–∏">üöÄ –ù–æ–≤—ã–µ —É—Ä–æ–≤–Ω–∏</button>
        <button class="theme-btn" onclick="resetGameProgress()" title="–û—á–∏—Å—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å" style="background: #ff9800; color: white; border-color: #ff9800;">üîÑ –°–±—Ä–æ—Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</button>
    </div>
    
    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('levels')">üéÆ –£—Ä–æ–≤–Ω–∏</button>
        <button class="tab-btn" onclick="switchTab('sandbox')">üèóÔ∏è –ü–µ—Å–æ—á–Ω–∏—Ü–∞</button>
    </div>
    <div id="levels" class="tab-content active">
        <div class="levels" id="level-buttons"></div>
        <div class="game-layout">
            <div class="game-board">
                <div class="stats">
                    <div class="stat"><div class="stat-value" id="score">0</div><div>–û—á–∫–∏</div></div>
                    <div class="stat"><div class="stat-value" id="steps">0</div><div>–®–∞–≥–∏</div></div>
                    <div class="stat"><div class="stat-value" id="meat">0/0</div><div>–ú—è—Å–æ üçñ</div></div>
                    <div class="stat"><div class="stat-value" id="keys">0</div><div>–ö–ª—é—á–∏ üîë</div></div>
                    <div class="stat"><div style="font-size: 32px; font-weight: bold; color: var(--primary-color); line-height: 1;" id="lives-display">‚àû</div><div>–ü–æ–ø—ã—Ç–∫–∏</div></div>
                </div>
                <div id="game-grid"></div>
            </div>
            <div class="code-panel">
                <div class="level-task" id="level-task"><h4>üìã –ó–∞–¥–∞–Ω–∏–µ:</h4><div id="task-text"></div></div>
                <div style="background: var(--bg-primary); padding: 10px; border-radius: 8px; margin-bottom: 15px; text-align: center; font-weight: 600; color: var(--primary-color); font-size: 1.1em;">
                    <span id="current-step-indicator"></span>
                </div>
                <div class="controls">
                    <button class="button run-btn" id="run-btn" onclick="runCode()">‚ñ∂ –ó–ê–ü–£–°–¢–ò–¢–¨</button>
                    <button class="button undo-btn" id="undo-btn" onclick="undoCommand()" disabled>‚Ü∂ –û—Ç–º–µ–Ω–∏—Ç—å —à–∞–≥</button>
                    <button class="button reset-btn" id="reset-btn" onclick="resetGame()">üîÑ –í–µ—Ä–Ω—É—Ç—å —Ç–∏–≥—Ä–∞</button>
                    <button class="button" style="background: #9c27b0;" onclick="clearCode()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É</button>
                </div>
                <div class="arrow-controls">
                    <div></div>
                    <button class="arrow-btn" onclick="addCommand('–≤–≤–µ—Ä—Ö()')" title="–≤–≤–µ—Ä—Ö()"><span style="font-size: 28px;">‚Üë</span></button>
                    <div></div>
                    <button class="arrow-btn" onclick="addCommand('–≤–ª–µ–≤–æ()')" title="–≤–ª–µ–≤–æ()"><span style="font-size: 28px;">‚Üê</span></button>
                    <button class="arrow-btn" onclick="addCommand('–≤–Ω–∏–∑()')" title="–≤–Ω–∏–∑()"><span style="font-size: 28px;">‚Üì</span></button>
                    <button class="arrow-btn" onclick="addCommand('–≤–ø—Ä–∞–≤–æ()')" title="–≤–ø—Ä–∞–≤–æ()"><span style="font-size: 28px;">‚Üí</span></button>
                </div>
                <div class="number-buttons">
                    <button class="num-btn" onclick="addNumber('1')">1</button>
                    <button class="num-btn" onclick="addNumber('2')">2</button>
                    <button class="num-btn" onclick="addNumber('3')">3</button>
                    <button class="num-btn" onclick="addNumber('4')">4</button>
                    <button class="num-btn" onclick="addNumber('5')">5</button>
                    <button class="num-btn" onclick="addNumber('6')">6</button>
                    <button class="num-btn" onclick="addNumber('7')">7</button>
                    <button class="num-btn" onclick="addNumber('8')">8</button>
                    <button class="num-btn" onclick="addNumber('9')">9</button>
                    <button class="num-btn" onclick="addNumber('0')">0</button>
                </div>
                <textarea id="code-input" placeholder="–ò–ª–∏ –Ω–∞–ø–∏—à–∏ –ø—Ä–æ–≥—Ä–∞–º–º—É –≤—Ä—É—á–Ω—É—é..."></textarea>
                <div class="commands">
                    <button class="cmd-btn" onclick="addCommand('–µ—Å—Ç—å()')"><span class="cmd-icon">üçñ</span><span>–µ—Å—Ç—å()</span></button>
                    <button class="cmd-btn" onclick="addCommand('–≤–∑—è—Ç—å()')"><span class="cmd-icon">üîë</span><span>–≤–∑—è—Ç—å()</span></button>
                    <button class="cmd-btn" onclick="addCommand('–æ—Ç–∫—Ä—ã—Ç—å()')"><span class="cmd-icon">üö™</span><span>–æ—Ç–∫—Ä—ã—Ç—å()</span></button>
                </div>
                <div class="code-history" id="code-history"><h4>üìú –ò—Å—Ç–æ—Ä–∏—è –ø–æ–ø—ã—Ç–æ–∫:</h4><div id="history-list"></div></div>
                <div class="hint">
                    <h4>üí° –í—Å–µ –∫–æ–º–∞–Ω–¥—ã:</h4>
                    <p><strong>–î–≤–∏–∂–µ–Ω–∏–µ:</strong></p>
                    <p>‚Ä¢ <code>–≤–ø—Ä–∞–≤–æ()</code> - –Ω–∞ 1 –∫–ª–µ—Ç–∫—É –≤–ø—Ä–∞–≤–æ</p>
                    <p>‚Ä¢ <code>–≤–ø—Ä–∞–≤–æ(3)</code> - –Ω–∞ 3 –∫–ª–µ—Ç–∫–∏ –≤–ø—Ä–∞–≤–æ</p>
                    <p>‚Ä¢ <code>–≤–ª–µ–≤–æ()</code>, <code>–≤–≤–µ—Ä—Ö()</code>, <code>–≤–Ω–∏–∑()</code> - –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ</p>
                    <p><strong>–î–µ–π—Å—Ç–≤–∏—è:</strong></p>
                    <p>‚Ä¢ <code>üçñ –µ—Å—Ç—å()</code> - —Å—ä–µ—Å—Ç—å –º—è—Å–æ</p>
                    <p>‚Ä¢ <code>üîë –≤–∑—è—Ç—å()</code> - –≤–∑—è—Ç—å –∫–ª—é—á</p>
                    <p>‚Ä¢ <code>üö™ –æ—Ç–∫—Ä—ã—Ç—å()</code> - –æ—Ç–∫—Ä—ã—Ç—å –¥–≤–µ—Ä—å</p>
                </div>
            </div>
        </div>
    </div>
    <!-- –í–∫–ª–∞–¥–∫–∞ –ü–µ—Å–æ—á–Ω–∏—Ü–∞ -->
    <div id="sandbox" class="tab-content">
        <div class="sandbox-container">
            <div class="sandbox-header">
                <h2 style="color: #7e57c2; font-size: 24px;">üèóÔ∏è –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —É—Ä–æ–≤–Ω–µ–π</h2>
                <div class="sandbox-controls">
                    <button class="sandbox-btn" onclick="uploadSandboxLevel()">üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª</button>
                    <button class="sandbox-btn" onclick="downloadSandboxLevel()">üì• –°–∫–∞—á–∞—Ç—å</button>
                    <button class="sandbox-btn orange" onclick="playSandboxLevel()">‚ñ∂ –ò–≥—Ä–∞—Ç—å</button>
                    <button class="sandbox-btn red" onclick="clearSandbox()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
                </div>
            </div>
            <div class="size-controls">
                <span>–†–∞–∑–º–µ—Ä –ø–æ–ª—è:</span>
                <button class="size-btn" onclick="setSandboxSize(4)">4x4</button>
                <button class="size-btn" onclick="setSandboxSize(6)">6x6</button>
                <button class="size-btn active" onclick="setSandboxSize(8)">8x8</button>
                <button class="size-btn" onclick="setSandboxSize(10)">10x10</button>
                <button class="size-btn" onclick="setSandboxSize(12)">12x12</button>
            </div>
            <div class="object-buttons">
                <button class="obj-btn active" onclick="selectSandboxObject('tiger')">üêØ<span>–¢–∏–≥—Ä—ë–Ω–æ–∫</span></button>
                <button class="obj-btn" onclick="selectSandboxObject('exit')">üü¢<span>–í—ã—Ö–æ–¥</span></button>
                <button class="obj-btn" onclick="selectSandboxObject('wall')">üß±<span>–°—Ç–µ–Ω–∞</span></button>
                <button class="obj-btn" onclick="selectSandboxObject('tree')">üå≥<span>–î–µ—Ä–µ–≤–æ</span></button>
                <button class="obj-btn" onclick="selectSandboxObject('meat')">üçñ<span>–ú—è—Å–æ</span></button>
                <button class="obj-btn" onclick="selectSandboxObject('key')">üîë<span>–ö–ª—é—á</span></button>
                <button class="obj-btn" onclick="selectSandboxObject('door')">üö™<span>–î–≤–µ—Ä—å</span></button>
                <button class="obj-btn" onclick="selectSandboxObject('empty')">üßπ<span>–û—á–∏—Å—Ç–∏—Ç—å</span></button>
            </div>
            <div style="text-align: center; margin-bottom: 15px; color: var(--text-secondary); font-size: 14px;">
                <small>üí° –ó–∞–∂–º–∏ –ª–µ–≤—É—é –∫–Ω–æ–ø–∫—É –º—ã—à–∏ –∏ —Ç—è–Ω–∏, —á—Ç–æ–±—ã —Ä–∏—Å–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª–µ—Ç–æ–∫!</small>
            </div>
            <div id="sandbox-grid"></div>
            <div class="hint">
                <h4>üéØ –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–º:</h4>
                <p>1. –í—ã–±–µ—Ä–∏ —Ä–∞–∑–º–µ—Ä –ø–æ–ª—è –∏ –æ–±—ä–µ–∫—Ç –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è</p>
                <p>2. –ö–ª–∏–∫–Ω–∏ –Ω–∞ –∫–ª–µ—Ç–∫—É –∏–ª–∏ –∑–∞–∂–º–∏ –º—ã—à—å –∏ —Ç—è–Ω–∏</p>
                <p>3. –ù–∞–∂–º–∏ "–ò–≥—Ä–∞—Ç—å" —á—Ç–æ–±—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å</p>
                <p>4. –ù–∞–∂–º–∏ "–°–∫–∞—á–∞—Ç—å" —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –≤ —Ñ–∞–π–ª</p>
            </div>
        </div>
    </div>
</div>
<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ -->
<div id="admin-modal" class="modal">
    <div class="admin-panel-content">
        <div class="admin-panel-header">
            <h2>‚öôÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>
            <button class="close-btn" onclick="closeAdminPanel()">‚úï</button>
        </div>
        <div class="admin-tabs">
            <button class="admin-tab-btn active" onclick="switchAdminTab('levels')">üìã –£—Ä–æ–≤–Ω–∏</button>
            <button class="admin-tab-btn" onclick="switchAdminTab('edit-levels')">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</button>
            <button class="admin-tab-btn" onclick="switchAdminTab('users')">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
            <button class="admin-tab-btn" onclick="switchAdminTab('notifications')">üì¢ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</button>
            <button class="admin-tab-btn" onclick="switchAdminTab('stats')">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
            <button class="admin-tab-btn" onclick="switchAdminTab('settings')">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        </div>
        <div id="admin-levels-tab" class="admin-tab-content active">
            <h3>üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è–º–∏</h3>
            <div class="admin-section">
                <h4>–ó–∞–≥—Ä—É–∑–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å</h4>
                <input type="file" id="admin-level-upload" accept=".json" />
                <button onclick="adminUploadLevel()">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
            </div>
            <div class="admin-section">
                <h4>–ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —É—Ä–æ–≤–Ω–∏</h4>
                <div id="admin-user-levels-list"></div>
            </div>
        </div>
        <div id="admin-edit-levels-tab" class="admin-tab-content">
            <h3>‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π</h3>
            <div class="admin-section">
                <h4>–í—ã–±–µ—Ä–∏ —É—Ä–æ–≤–µ–Ω—å –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 10px; margin-bottom: 20px;">
                    <button class="size-btn" onclick="editLevelFull(1)">–£—Ä–æ–≤–µ–Ω—å 1</button>
                    <button class="size-btn" onclick="editLevelFull(2)">–£—Ä–æ–≤–µ–Ω—å 2</button>
                    <button class="size-btn" onclick="editLevelFull(3)">–£—Ä–æ–≤–µ–Ω—å 3</button>
                    <button class="size-btn" onclick="editLevelFull(4)">–£—Ä–æ–≤–µ–Ω—å 4</button>
                    <button class="size-btn" onclick="editLevelFull(5)">–£—Ä–æ–≤–µ–Ω—å 5</button>
                    <button class="size-btn" onclick="editLevelFull(6)">–£—Ä–æ–≤–µ–Ω—å 6</button>
                </div>
            </div>
            <div id="level-edit-form" style="display: none;">
                <div class="admin-section">
                    <h4 id="edit-level-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Ä–æ–≤–Ω—è 1</h4>
                    
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ —É—Ä–æ–≤–Ω—è:</label>
                    <input type="text" id="edit-level-name" style="width: 100%; padding: 10px; margin-bottom: 10px; border: 2px solid var(--border-color); border-radius: 8px; background: var(--bg-primary); color: var(--text-primary);">
                    
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è:</label>
                    <textarea id="edit-level-task" style="width: 100%; height: 60px; padding: 10px; margin-bottom: 10px; border: 2px solid var(--border-color); border-radius: 8px; background: var(--bg-primary); color: var(--text-primary); resize: vertical;"></textarea>
                    
                    <label>–í—ã–±–µ—Ä–∏ –æ–±—ä–µ–∫—Ç –¥–ª—è —Ä–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∏:</label>
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 15px;">
                        <button class="obj-btn" onclick="selectEditObject('tiger')" style="padding: 10px; background: var(--bg-primary); border: 2px solid var(--border-color); border-radius: 8px; cursor: pointer;">üêØ –¢–∏–≥—Ä</button>
                        <button class="obj-btn" onclick="selectEditObject('exit')" style="padding: 10px; background: var(--bg-primary); border: 2px solid var(--border-color); border-radius: 8px; cursor: pointer;">üü¢ –í—ã—Ö–æ–¥</button>
                        <button class="obj-btn" onclick="selectEditObject('meat')" style="padding: 10px; background: var(--bg-primary); border: 2px solid var(--border-color); border-radius: 8px; cursor: pointer;">üçñ –ú—è—Å–æ</button>
                        <button class="obj-btn" onclick="selectEditObject('key')" style="padding: 10px; background: var(--bg-primary); border: 2px solid var(--border-color); border-radius: 8px; cursor: pointer;">üîë –ö–ª—é—á</button>
                        <button class="obj-btn" onclick="selectEditObject('tree')" style="padding: 10px; background: var(--bg-primary); border: 2px solid var(--border-color); border-radius: 8px; cursor: pointer;">üå≥ –î–µ—Ä–µ–≤–æ</button>
                        <button class="obj-btn" onclick="selectEditObject('wall')" style="padding: 10px; background: var(--bg-primary); border: 2px solid var(--border-color); border-radius: 8px; cursor: pointer;">üß± –°—Ç–µ–Ω–∞</button>
                        <button class="obj-btn" onclick="selectEditObject('door')" style="padding: 10px; background: var(--bg-primary); border: 2px solid var(--border-color); border-radius: 8px; cursor: pointer;">üö™ –î–≤–µ—Ä—å</button>
                        <button class="obj-btn" onclick="selectEditObject('empty')" style="padding: 10px; background: var(--bg-primary); border: 2px solid var(--border-color); border-radius: 8px; cursor: pointer;">üßπ –û—á–∏—Å—Ç–∏—Ç—å</button>
                    </div>
                    
                    <label>–°–µ—Ç–∫–∞ —É—Ä–æ–≤–Ω—è (–∫–ª–∏–∫–Ω–∏ –¥–ª—è —Ä–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∏):</label>
                    <div id="edit-level-grid" style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 4px; margin-bottom: 15px; background: var(--bg-primary); padding: 10px; border-radius: 8px; width: fit-content;"></div>
                    
                    <label>–°–ª–æ–∂–Ω–æ—Å—Ç—å (1-5):</label>
                    <input type="number" id="edit-level-difficulty" min="1" max="5" style="width: 100%; padding: 10px; margin-bottom: 15px; border: 2px solid var(--border-color); border-radius: 8px; background: var(--bg-primary); color: var(--text-primary);">
                    
                    <div style="display: flex; gap: 10px; margin-top: 15px;">
                        <button onclick="saveLevelEditFull()" style="flex: 1; padding: 12px; background: var(--success-color); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        <button onclick="downloadEditedLevel()" style="flex: 1; padding: 12px; background: #2196f3; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">üì• –°–∫–∞—á–∞—Ç—å</button>
                        <button onclick="resetLevelEditFull()" style="flex: 1; padding: 12px; background: var(--warning-color); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">üîÑ –°–±—Ä–æ—Å–∏—Ç—å</button>
                        <button onclick="cancelLevelEditFull()" style="flex: 1; padding: 12px; background: var(--error-color); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">‚úï –û—Ç–º–µ–Ω–∞</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="admin-users-tab" class="admin-tab-content">
            <h3>üë• –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
            <div class="admin-section">
                <div id="admin-users-list"></div>
            </div>
        </div>
        <div id="admin-notifications-tab" class="admin-tab-content">
            <h3>üì¢ –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</h3>
            <div class="admin-section">
                <h4>–ù–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</h4>
                <input type="text" id="notification-title" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è" style="width: 100%; padding: 10px; margin-bottom: 10px; border: 2px solid var(--border-color); border-radius: 8px; background: var(--bg-primary); color: var(--text-primary);">
                <textarea id="notification-text" placeholder="–¢–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è" style="width: 100%; height: 100px; padding: 10px; margin-bottom: 10px; border: 2px solid var(--border-color); border-radius: 8px; background: var(--bg-primary); color: var(--text-primary); resize: vertical;"></textarea>
                <button onclick="sendNotificationToAll()">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ–º</button>
            </div>
            <div class="admin-section">
                <h4>–ò—Å—Ç–æ—Ä–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h4>
                <div id="admin-notifications-list"></div>
            </div>
        </div>
        <div id="admin-stats-tab" class="admin-tab-content">
            <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
            <div class="admin-section">
                <p>–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: <strong id="admin-total-users">0</strong></p>
                <p>–í—Å–µ–≥–æ —É—Ä–æ–≤–Ω–µ–π: <strong id="admin-total-levels">0</strong></p>
                <p>–ü—Ä–æ–π–¥–µ–Ω–æ —É—Ä–æ–≤–Ω–µ–π: <strong id="admin-completed-levels">0</strong></p>
            </div>
        </div>
        <div id="admin-settings-tab" class="admin-tab-content">
            <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
            <div class="admin-section">
                <label>
                    <input type="checkbox" id="ai-enabled-checkbox" onchange="toggleAIChat(this.checked)">
                    –í–∫–ª—é—á–∏—Ç—å –ò–ò –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                </label>
            </div>
        </div>
    </div>
</div>

<!-- –ò–ò –ß–∞—Ç -->
<div id="ai-chat-widget" class="ai-chat-widget">
    <div class="ai-chat-header">
        <h3>ü§ñ –ò–ò –ü–æ–º–æ—â–Ω–∏–∫</h3>
        <button class="ai-chat-close" onclick="toggleAIChatWidget()">‚úï</button>
    </div>
    <div class="ai-chat-messages" id="ai-chat-messages"></div>
    <div class="ai-chat-input-area">
        <input type="text" id="ai-chat-input" placeholder="–ó–∞–¥–∞–π –≤–æ–ø—Ä–æ—Å –ø–æ–º–æ—â–Ω–∏–∫—É..." maxlength="500">
        <button class="ai-chat-send" onclick="sendAIChatMessage()">üì§</button>
    </div>
</div>

<button class="ai-chat-btn" onclick="toggleAIChatWidget()" title="–ò–ò –ü–æ–º–æ—â–Ω–∏–∫">ü§ñ</button>
<button class="admin-btn-floating" onclick="openAdminPanel()" title="–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (üîê)">üîê</button>
<script src="test_game.js?v=22"></script>
<script src="test_story.js?v=9"></script>
<script src="test_admin_panel.js?v=9"></script>
<script src="ai_chat.js?v=7"></script>
<script src="stats_system.js?v=17"></script>
<script src="game_modes.js?v=3"></script>
<script src="achievements_display.js?v=1"></script>
<script src="levels_admin.js?v=3"></script>
</body>
</html>